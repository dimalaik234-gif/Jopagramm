<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jopagramm ‚Äî –¢–≤–æ–π –¥–µ—Ä–∑–∫–∏–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
    <style>
        :root {
            --bg-color: #0f0f12;
            --sidebar-color: #1a1a1f;
            --accent-color: #8b5cf6;
            --text-color: #e2e8f0;
            --msg-user: #4c1d95;
            --msg-other: #2d2d35;
        }

        body, html {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
        }

        /* --- Layout --- */
        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 300px;
            background: var(--sidebar-color);
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }

        .search-bar {
            padding: 15px;
            background: #111;
        }

        .search-bar input {
            width: 90%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            background: #2d2d35;
            color: white;
        }

        .chat-list {
            flex: 1;
            overflow-y: auto;
        }

        .chat-item {
            padding: 15px;
            cursor: pointer;
            border-bottom: 1px solid #222;
            transition: 0.3s;
        }

        .chat-item:hover { background: #2d2d35; }

        /* Main Chat Area */
        .main-chat {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
        }

        .chat-header {
            padding: 15px;
            background: var(--sidebar-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #333;
        }

        #messages-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 0.95rem;
            position: relative;
        }

        .msg-mine { align-self: flex-end; background: var(--msg-user); }
        .msg-other { align-self: flex-start; background: var(--msg-other); }

        .pinned-label { font-size: 0.7rem; color: #aaa; margin-bottom: 5px; }

        /* Input Area */
        .input-area {
            padding: 15px;
            background: var(--sidebar-color);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .input-area input {
            flex: 1;
            padding: 12px;
            border-radius: 20px;
            border: none;
            background: #2d2d35;
            color: white;
        }

        .btn-icon {
            background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--accent-color);
        }

        /* Modals & Overlays */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none; justify-content: center; align-items: center; z-index: 100;
        }

        .modal {
            background: var(--sidebar-color);
            padding: 20px;
            border-radius: 15px;
            width: 320px;
            text-align: center;
        }

        /* --- Pelmeni Mode --- */
        .pelmeni-mode {
            filter: sepia(1) hue-rotate(45deg);
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar { width: 80px; }
            .sidebar span { display: none; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="sidebar">
        <div class="search-bar">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ –≤ Jopagramm..." id="chatSearch">
        </div>
        <div class="chat-list" id="chatList">
            <div class="chat-item" onclick="openChat('–û–±—â–∏–π —á–∞—Ç')"><b>#</b> <span>–û–±—â–∏–π —á–∞—Ç</span></div>
            <div class="chat-item" onclick="openChat('–ü—Ä–∏–≤–∞—Ç ü§´', true)"><b>üîí</b> <span>–ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∑–æ–Ω–∞</span></div>
        </div>
        <div class="chat-item" onclick="toggleSettings()"><b>‚öôÔ∏è</b> <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span></div>
    </div>

    <div class="main-chat">
        <div class="chat-header">
            <h3 id="currentChatName">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h3>
            <div id="pinInfo"></div>
        </div>
        <div id="messages-container">
            <div class="message msg-other">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Jopagramm!</div>
        </div>
        <div class="input-area">
            <button class="btn-icon">üì∑</button>
            <button class="btn-icon">üéôÔ∏è</button>
            <input type="text" id="msgInput" placeholder="–ü–∏—à–∏ —Å—é–¥–∞...">
            <button class="btn-icon" onclick="sendMessage()">üöÄ</button>
        </div>
    </div>
</div>

<div id="settingsOverlay" class="overlay">
    <div class="modal">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
        <input type="text" id="nickName" placeholder="–¢–≤–æ–π –Ω–∏–∫–Ω–µ–π–º" style="margin-bottom:10px; width:80%;">
        <textarea id="userDesc" placeholder="–û —Å–µ–±–µ" style="width:80%;"></textarea>
        <hr>
        <p>–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥:</p>
        <input type="password" id="secretCode" placeholder="???" oninput="checkSecretCode()">
        <br><br>
        <button onclick="toggleSettings()">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<script>
    // 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    let currentUser = { nickname: "User", description: "Hacker" };
    let isPelmeniMode = false;

    // 2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (–±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
    function sendMessage() {
        const input = document.getElementById('msgInput');
        const container = document.getElementById('messages-container');
        
        if (input.value.trim() === "") return;

        const msgDiv = document.createElement('div');
        msgDiv.className = 'message msg-mine';
        msgDiv.textContent = input.value;
        
        // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–µ–ø–∞ (—Ñ—É–Ω–∫—Ü–∏—è 6)
        msgDiv.ondblclick = () => pinMessage(input.value);

        container.appendChild(msgDiv);
        input.value = "";
        container.scrollTop = container.scrollHeight;
    }

    // 3. –°–µ–∫—Ä–µ—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è "–ü–µ–ª—å–º–µ–Ω–∏" (—Ñ—É–Ω–∫—Ü–∏—è 8)
    function checkSecretCode() {
        const code = document.getElementById('secretCode').value.toLowerCase();
        if (code === '–ø–µ–ª—å–º–µ–Ω–∏' || code === 'pelmeni') {
            document.body.classList.toggle('pelmeni-mode');
            alert("–†–ï–ñ–ò–ú –ü–ï–õ–¨–ú–ï–ù–ï–ô –ê–ö–¢–ò–í–ò–†–û–í–ê–ù! ü•ü");
        }
    }

    // 4. –ó–∞–∫—Ä–µ–ø (—Ñ—É–Ω–∫—Ü–∏—è 6)
    function pinMessage(text) {
        document.getElementById('pinInfo').innerHTML = `üìå –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ: ${text.substring(0, 15)}...`;
    }

    // 5. –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —á–∞—Ç—ã (–ø–∞—Ä–æ–ª—å) (—Ñ—É–Ω–∫—Ü–∏—è 3)
    function openChat(name, isPrivate = false) {
        if (isPrivate) {
            const pass = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —ç—Ç–æ—Ç —á–∞—Ç:");
            if (pass !== "1234") {
                alert("–ù–µ–≤–µ—Ä–Ω–æ! –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç.");
                return;
            }
        }
        document.getElementById('currentChatName').textContent = name;
        document.getElementById('messages-container').innerHTML = `<div class="message msg-other">–í—ã –≤–æ—à–ª–∏ –≤ ${name}</div>`;
    }

    // 6. –ü–æ–∏—Å–∫ (—Ñ—É–Ω–∫—Ü–∏—è 5)
    document.getElementById('chatSearch').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const items = document.querySelectorAll('.chat-item');
        items.forEach(item => {
            const text = item.textContent.toLowerCase();
            item.style.display = text.includes(term) ? 'block' : 'none';
        });
    });

    function toggleSettings() {
        const overlay = document.getElementById('settingsOverlay');
        overlay.style.display = (overlay.style.display === 'flex') ? 'none' : 'flex';
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
    document.getElementById('msgInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendMessage();
    });
</script>

</body>
</html>
